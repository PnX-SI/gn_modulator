{
  "meta": {
    "schema_name": "m_monitoring.site",
    "sql_processing": true,
    "sql_schema_dot_table": "m_monitoring.t_sites",
    "genre": "M",
    "label": "site",
    "label_field_name": "site_name",
    "geometry_field_name": "site_geom",
    "unique": [
      "site_code"
    ]
    // "check_cruved": true,
  },
  "map": {
    "popup_fields": [
      "site_name",
      "site_code",
      "site_desc"
    ]
  },
  "table": {
    "columns": [
      "site_category.category_name",
      "site_code",
      "site_name",
      "nb_visits",
      "last_visit_date_min"
    ],
    "sort": [
      {
        "column": "last_visit_date_min",
        "dir": "desc"
      }
    ]
  },
  "required": [
    "site_code",
    "site_name",
    "site_geom"
  ],
  "form": {
    "layout": [
      {
        "hidden": true,
        "items": [
          "id_site",
          "site_geom",
          {
            "key": "id_digitiser",
            "default": "__f__meta.currentUser?.id_role"
          }
        ]
      },
      "site_code",
      "site_name",
      {
        "key": "id_digitiser",
        "default": "__f__meta.currentUser?.id_role",
        "hidden": true
      },
      {
        "key": "id_site_category",
        "type": "list_form",
        "title": "Cat√©gorie de site",
        "schema_name": "m_monitoring.site_category"
      },
      {
        "key": "id_nomenclature_type_site",
        "type": "list_form",
        "title": "Type de site",
        "schema_name": "ref_nom.nomenclature"
      }
    ]
  },
  "details": {
    "layout": [
      "site_code",
      "site_name",
      "type_site",
      "digitiser.nom_complet ",
      "inventor.nom_complet",
      "nomenclature_type_site.label_fr",
      "site_category.category_name",
      "label_regions",
      "label_departements",
      "label_communes",
      "label_infrastructures"
    ]
  }
}