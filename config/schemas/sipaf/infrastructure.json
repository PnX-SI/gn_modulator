{
  "$id": "schemas/pf/infrastructure",
  "type": "object",
  "$meta": {
    "sql_processing": true,
    "sql_schema_name": "sipaf",
    "sql_table_name": "l_infrastructures",
    "genre": "F",
    "label": "infrastructure",
    "geometry_field_name": "geom",
    "label_field_name": "infrastructure_name"
  },
  "properties": {

    "id_infrastructure": {
      "type": "integer",
      "title": "ID enfant",
      "primary_key": true
    },

    "infrastructure_name": {
      "title": "Code infrastructure",
      "type": "string"
    },

    
    "infrastructure_number": {
      "title": "Code infrastructure",
      "type": "integer"
    },

    "id_nomenclature_infrastructure_type": {
      "title": "Type d'infrastructure",
      "type": "integer",
      "foreign_key": true,
      "schema_name": "schemas.utils.nomenclature.nomenclature",
      "nomenclature_type": "PF_INFRASTRUCTURE_TYPE"
    },

    "geom": {
      "title": "géometrie",
      "type": "geometry",
      "geometry_type": "geometry",
      "srid": 4326,
      "index": true
    },

    // relation

    "nomenclature_infrastructure_type": {
      "type": "relation",
      "relation_type": "n-1",
      "schema_name": "schemas.utils.nomenclature.nomenclature",
      "title": "Type d'infrastructure",
      "local_key": "id_nomenclature_infrastructure_type"
    },

    "passages_faune": {
      "type": "relation",
      "relation_type": "n-n",
      "schema_name": "schemas.sipaf.pf",
      "title": "Passages faune",
      "schema_dot_table": "sipaf.cor_infrastructure_pf"
      // "column_properties": [
        // { "type": "nb" },
        // { "type": "has" }
      // ]
    },

    // column_properties
    "nb_passages_faune": {
      "type": "integer",
      "title": "Nombre de passages faune",
      "column_property": "nb",
      "relation_key": "passages_faune"
    },

    "has_passages_faune": {
      "type": "boolean",
      "title": "Possède des passages faune",
      "column_property": "has",
      "relation_key": "passages_faune"
    }
    // ,
    // "label_passages_faune": {
    //   "type": "string",
    //   "title": "Possède des passages faune",
    //   "column_property": "label",
    //   "relation_key": "passages_faune",
    //   "label_key": "id_pf"
    // }


  }
}