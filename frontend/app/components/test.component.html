<div *ngIf='componentInitialized; else loadingBlock'>

  <mat-tab-group
    dynamicHeight
    [(selectedIndex)]="tabIndex"
    (selectedTabChange)="onTabChange($event)"
  >
    <mat-tab
      label="Carte"
      *ngIf="listTab.includes('map')"
    >
      <!-- <ng-template matTabContent> -->
        <modules-base-map
          [schemaName]="schemaName"
          [value]="value"
          [center]="center"
          [zoom]="zoom"
          [compress]="true"
          [mapId]="mapListId"
          [heightMap]="heightMap"
          (onLayerClick)="onLayerClick($event)"
        ></modules-base-map>
      <!-- </ng-template> -->
    </mat-tab>
    <mat-tab
      label="Tableau"
      *ngIf="listTab.includes('table')"
    >
      <!-- <ng-template matTabContent> -->
        <div class='test-base-components'>
          <modules-base-table
            [schemaName]="schemaName"
            [value]="value"
            (onRowSelected)="onRowSelected($event)"
          ></modules-base-table>
        </div>
      <!-- </ng-template> -->
    </mat-tab>
    <mat-tab
      [disabled]="!value"
      label="Details"
      *ngIf="listTab.includes('detail')"
      >
      <!-- <ng-template matTabContent> -->
        <div class='test-base-components'>
          <modules-base-properties
            [schemaName]="schemaName"
            [value]="value"
            [mapId]="mapDetailId"
            [center]="center"
            [zoom]="zoom"
            [heightMap]="heightMap"
          ></modules-base-properties>
        </div>
      <!-- </ng-template> -->
    </mat-tab>
    <mat-tab
      [disabled]="!value"
      label="Formulaire"
      *ngIf="listTab.includes('edit')"
    >
      <!-- <ng-template matTabContent> -->
        <modules-base-form
          [schemaName]="schemaName"
          [value]="value"
          [mapId]="mapEditId"
          [center]="center"
          [zoom]="zoom"
          [heightMap]="heightMap"
          [debug]="debug"
        ></modules-base-form>
      <!-- </ng-template> -->
    </mat-tab>
  </mat-tab-group>

<ng-template #loadingBlock>
  <div>
      Chargement en cours...
  </div>
</ng-template>