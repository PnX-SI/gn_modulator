<div *ngIf='componentInitialized; else loadingBlock'>

  <div *ngIf="debug">
    Debug Test : filters {{filters| json}}
  </div>
  <mat-tab-group
    dynamicHeight
    [(selectedIndex)]="tabIndex"
    (selectedTabChange)="onTabChange($event)"
  >


  <!-- Carte-->

  <mat-tab
      label="Carte"
      *ngIf="listTab.includes('map')"
    >
        <modules-base-map
          [filters]="filters"
          [schemaName]="schemaName"
          [value]="value"
          [center]="center"
          [debug]="debug"
          [zoom]="zoom"
          [compress]="true"
          [mapId]="mapListId"
          [height]="height"
          (onLayerClick)="onLayerClick($event)"
        ></modules-base-map>
  </mat-tab>


    <!-- Tableau -->

    <mat-tab
      label="Tableau"
      *ngIf="listTab.includes('table')"
    >
        <div class='test-base-components'>
          <modules-base-table
            [schemaName]="schemaName"
            [value]="value"
            (onRowSelected)="onRowSelected($event)"
          ></modules-base-table>
        </div>
    </mat-tab>

    <!-- Details -->>

    <mat-tab
      [disabled]="!value"
      label="Details"
      *ngIf="listTab.includes('detail')"
      >
        <div class='test-base-components'>
          <modules-base-properties
            [schemaName]="schemaName"
            [value]="value"
            [mapId]="mapDetailId"
            [center]="center"
            [zoom]="zoom"
            [height]="height"
          ></modules-base-properties>
        </div>
    </mat-tab>


    <!-- Form -->

    <mat-tab
      [disabled]="!value"
      label="Formulaire"
      *ngIf="listTab.includes('edit')"
    >
        <modules-base-form
          [schemaName]="schemaName"
          [value]="value"
          [mapId]="mapEditId"
          [center]="center"
          [zoom]="zoom"
          [height]="height"
          [debug]="debug"
        ></modules-base-form>
    </mat-tab>


    <!-- Filtre -->

  <mat-tab
  label="Filtres"
  *ngIf="listTab.includes('filters')"
>
    <modules-base-filters
      [schemaName]="schemaName"
      [filters]="filters"
      [debug]="debug"
    ></modules-base-filters>
</mat-tab>


</mat-tab-group>

<ng-template #loadingBlock>
  <div>
      Chargement en cours...
  </div>
</ng-template>