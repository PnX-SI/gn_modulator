<!-- Section
  - normal
  - fieldset
  - tabs
  - ?? accordeon
-->

<ng-container *ngIf="isInitialized">
  <div
    [ngStyle]="computedLayout.display == 'tabs' ? null :  computedLayout.style"
    [attr.id]="_id"
    class="layout-section"
    [ngClass]="computedLayout.class"
  >
    <ng-container [ngSwitch]="computedLayout.display">
      <!-- FieldSet-->
      <ng-container *ngSwitchCase="'fieldset'">
        <fieldset class="fieldset">
          <legend *ngIf="computedLayout.title">
            {{ computedLayout.title }}
          </legend>

          <modules-layout
            [data]="data"
            [direction]="computedLayout.direction"
            [layout]="computedLayout.items || []"
            [parentContext]="context"
            (onAction)="processAction($event)"
          ></modules-layout>
        </fieldset>
      </ng-container>

      <!-- Tabs -->
      <ng-container *ngSwitchCase="'tabs'">
        <mat-tab-group
          class="layout-section"
          (selectedTabChange)="onTabChanged($event)"
          [ngStyle]="computedLayout.style"
        >
          <ng-container *ngFor="let item of layout.items; let index = index">
            <mat-tab
              [label]="computedItems[index].label || computedItems[index].title || index"
              *ngIf="!computedItems[index].hidden"
              class="layout-section"
            >
              <div class="layout-tab">
                <modules-layout
                  class="layout-tab"
                  [data]="data"
                  [layout]="item"
                  [parentContext]="context"
                  (onAction)="processAction($event)"
                >
                </modules-layout>
              </div>
            </mat-tab>
          </ng-container>
        </mat-tab-group>
      </ng-container>

      <!-- normal / default -->
      <ng-container *ngSwitchDefault>
        <div class="flexiflex">
          <div class="flexiflex-tilte">
            <h3 *ngIf="computedLayout.title">{{ computedLayout.title }}</h3>
          </div>

          <div class="flexiflex-content">
            <modules-layout
              [data]="data"
              [direction]="computedLayout.direction"
              [layout]="computedLayout.items || []"
              [parentContext]="context"
              (onAction)="processAction($event)"
            ></modules-layout>
          </div>
        </div>
      </ng-container>
    </ng-container>
  </div>
</ng-container>
